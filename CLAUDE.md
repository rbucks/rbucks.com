# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is Ryan Buckley's personal blog website (rbucks.com) built with Pelican, a Python-based static site generator. The site uses a custom theme called "Graymill" and is deployed via GitHub Pages with automated CI/CD.

## Architecture

**Static Site Generation**: Pelican processes Markdown content files into static HTML using Jinja2 templates.

**Content Structure**: Blog posts are Markdown files in `/content/` with metadata headers (Title, Date, Slug, Category, Tags). The site maintains WordPress-style URL structure for SEO preservation: `{year}/{month}/{day}/{slug}/`.

**Theme System**: Uses custom "Graymill" theme in `/themes/graymill/` with:
- Custom CSS that includes a sidebar layout (sidebar width: 25%, main content: 75%)
- Jinja2 templates for different page types
- Static assets (favicon, social icons)

**Deployment Strategy**: Fully automated via GitHub Actions - never edit `/docs/` directly. The workflow builds the site using `publishconf.py` and deploys to GitHub Pages.

## Essential Commands

**Local Development**:
```bash
# Development server with auto-reload
make devserver

# Build for development (relative URLs)
make html

# Build for production
make publish

# Clean generated files
make clean
```

**Content Management**:
```bash
# Add new blog post
# Create .md file in /content/ with metadata header:
# Title: Post Title
# Date: YYYY-MM-DD HH:MM
# Slug: post-slug
# Category: category-name
# Tags: tag1, tag2

# Save as draft (won't be published)
# Add Status: draft to metadata header:
# Title: Post Title
# Date: YYYY-MM-DD HH:MM
# Slug: post-slug
# Category: category-name
# Tags: tag1, tag2
# Status: draft
```

**Deployment**:
```bash
# Deploy changes (triggers GitHub Actions)
git add .
git commit -m "Description of changes"
git push origin main
```

## Configuration Files

- `pelicanconf.py`: Development settings with relative URLs
- `publishconf.py`: Production settings with absolute URLs, inherits from pelicanconf.py
- `Makefile`: Build and development commands
- `.github/workflows/pelican.yml`: Automated deployment pipeline

## Content Guidelines

**URL Structure**: Maintains WordPress format `/{year}/{month}/{day}/{slug}/` for SEO continuity.

**Categories**: Uses meaningful categories like `entrepreneurship`, `health-fitness`, `politics-environment`, `technology`, etc.

**Metadata**: All posts require Title, Date, Slug, Category, and Tags in the header.

**Images**: Stored in `/content/images/` and referenced as `{static}/images/filename.ext` in posts.

## Theme Customization

**CSS**: Primary styles in `/themes/graymill/static/css/custom.css`
- Sidebar width set to 25% to prevent category name truncation
- Main content width set to 75%
- Responsive breakpoints maintain these proportions

**Templates**: Located in `/themes/graymill/templates/`
- `base.html`: Main layout with sidebar containing categories and social links
- Category display shows as "CATEGORIES" with individual category links

**Static Assets**: Favicon converted from `ryan.svg` to `favicon.ico` in theme static directory.

## Deployment Notes

**Never Edit `/docs/` Directly**: This directory is auto-generated by GitHub Actions. Always edit source files and push to trigger deployment.

**GitHub Actions Workflow**: Automatically triggered on push to main branch, builds site with production settings, and deploys to GitHub Pages.

**Custom Domain**: Site uses `rbucks.com` domain configured via CNAME file generated during build.

## Collaborative Writing Workflow

**Notation System**: Use `<<Claude: action>>` format to leave editing notes for Claude to process.

**Examples:**
```markdown
I used to believe venture capital was bad <<Claude: link to post about venture capital or funding>> but now I think differently.

The history of venture capital is complex <<Claude: explain venture capital history in 3 sentences>>.

I wrote about this before <<Claude: find post about entrepreneurship and funding>>.

This reminds me of what happened with Scripted <<Claude: link to "being the other co-founder" post>>.
```

**Action Types:**
- `<<Claude: link to post about [topic]>>` - Find and link to relevant post
- `<<Claude: find post titled "[title]">>` - Link to specific post by title
- `<<Claude: explain [topic] in X sentences>>` - Add explanatory content
- `<<Claude: research [topic]>>` - Add factual information
- `<<Claude: expand on [topic]>>` - Add more detail
- `<<Claude: fact-check this>>` - Verify information

**Processing Workflow:**
1. You write with `<<Claude: action>>` notes in your draft
2. Claude searches `/content/` directory for relevant posts by keywords, titles, categories, tags, and content similarity
3. Claude replaces notes with actual Markdown links `[text](url)` or requested content
4. You review changes before committing

## Draft Workflow

**Saving Drafts**: Add `Status: draft` to the frontmatter to prevent posts from being published while you're working on them.

**Draft Examples:**
```markdown
Title: My Unfinished Post  
Date: 2025-06-30 14:30
Slug: my-unfinished-post
Category: Personal
Tags: writing, draft
Status: draft

Content with <<Claude: action>> notes...
```

**Publishing Drafts**: Remove the `Status: draft` line when ready to publish.

**Testing**: Run `make html` locally to verify draft posts are excluded from the build.

## File Structure Context

- `/content/`: Markdown blog posts with metadata headers
- `/themes/graymill/`: Custom theme with templates and styles  
- `/docs/`: Auto-generated output directory (do not edit manually)
- Root config files control build process and deployment

## GitHub Actions

**Deployment Workflow**:
- The publishing GitHub Actions flow automates the entire site deployment process
- Triggered automatically on push to the main branch
- Builds the site using production configuration
- Generates static files and deploys to GitHub Pages
- Ensures consistent and reproducible site builds
- Handles custom domain configuration
- Automatically applies production-level optimizations